<!doctype html>
<html lang="sv">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Offert avslagen</title>
<style>
  body{font-family:system-ui, sans-serif;margin:0;background:#fff}
  .wrap{max-width:720px;margin:40px auto;padding:24px}
  .card{border:1px solid #eee;border-radius:12px;padding:16px}
  .muted{color:#666}
</style>
<div class="wrap">
  <div class="card" id="view">Bearbetar…</div>
  <p class="muted">Du kan stänga denna sida när du ser bekräftelsen.</p>
</div>
<script>
const API_BASE = "https://preview--bygg-assist-78c09474.base44.app/api";
const ENDPOINT = "/publicDecline";
(function(){
  const parts = location.pathname.split("/").filter(Boolean);
  const token = parts[1] || "";
  const v = document.getElementById("view");
  if(!token){ v.textContent = "Saknar token i URL:en."; return; }
  v.textContent = "Bearbetar…";
  fetch(API_BASE + ENDPOINT + "?token=" + encodeURIComponent(token), { method: "GET" })
    .then((r)=>{ if(!r.ok) throw new Error("HTTP "+r.status); v.innerHTML="<h1>Tack!</h1><p>Offerten är nu <b>avslagen</b>.</p>"; })
    .catch(()=>{ v.innerHTML="<h1>Tack!</h1><p>Vi kunde inte bekräfta mot servern just nu, men ditt val registreras visuellt.</p>"; });
})();
</script>
